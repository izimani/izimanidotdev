---
import SubpageLayout from "#layouts/SubpageLayout.astro";
import { getSortedLiveShorts } from "#shorts";
import type { CollectionEntry } from "astro:content";
import ShortListing from "#components/shorts/ShortListing.astro";
import { HeaderVariant } from "#components/common/Header.astro";

export async function getStaticPaths() {
  function shortToPath(short: CollectionEntry<"shorts">) {
    return {
      params: {
        id: short.id,
      },
      props: {
        short,
      },
    };
  }

  return (await getSortedLiveShorts()).map(shortToPath);
}

interface Props {
  short: CollectionEntry<"shorts">;
}

const { short } = Astro.props;
const shorts = [short];
---

<SubpageLayout
  title={short.data.title ?? ""}
  description="Feed of short and not-so-short but definitely unstructured thoughts and ideas."
  headerVariant={HeaderVariant.Short}
>
  <ShortListing shorts={shorts} />
</SubpageLayout>
